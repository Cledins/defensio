<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='style2.css') }}">
    <title>Phase 2</title>
</head>
<body>

    <body class="bg-gray-200">
        <div id="flex-container-1" class="flex-container">
                <!-- Logo en haut à gauche -->
                <img src="/static/logo.png" alt="Votre Logo" class="w-12 h-12">
                <!-- Timer -->
                <div id="timer">Timer : <span id="countdown"></span></div>
                <!-- Numéro du groupe en haut à droite -->
                <div id="numberDisplay" class="text-xl font-bold"></div>
           
        </div>
    </div>
    
    <div id="flex-container-2" class="flex-container">
        <!-- Jauges -->    
        <div>
            <img src="/static/C.png" alt="Jauge C">
            <div id="JaugeC"></div>
        </div>
        <div>
            <img src="/static/R.png" alt="Jauge R">
            <div id="JaugeR"></div>
        </div>
        <div>
            <img src="/static/I.png" alt="Jauge I">
            <div id="JaugeI"></div>
        </div>
    </div>
    
    <div id="flex-container-3" class="flex-container">
        <div id="card-container" class="flex-container">
    
        </div>

        <div class="additional-containers">
            <!-- Additional flex containers (4 in this example) -->
            <div class="additional-container">Défense feu</div>
            <div class="additional-container">Défense terre</div>
            <div class="additional-container">Défense air</div>
            <div class="additional-container">Défense eau</div>
        </div>
    </div>

    <script>
        // Set the duration of the timer in seconds
        const timerDuration = 2; // Change this value to the desired duration
    
        let countdown = timerDuration;
        let countdownInterval;
    
        function startTimer() {
        countdownInterval = setInterval(updateTimer, 1000);
        }
    
        function updateTimer() {
        const timerElement = document.getElementById('countdown');
    
        if (countdown > 0) {
            countdown--;
            timerElement.textContent = countdown;
        } else {
            clearInterval(countdownInterval);
            // Timer is complete, transition to another page
            window.location.href = '/debrief2'; // Change the URL to your second phase page
        }
        }
    
        // Call startTimer() when you want to start the timer
        // For example, call it when the 1st phase begins
        startTimer();
    
    </script>


    <script>
        fetch('/get-jauge/'+storedNumber)
            .then(response => response.json())
            .then(apidata => {
                R=apidata.jauge_r;
                I=apidata.jauge_i;
                C=apidata.jauge_c;
                //add defenses to the stored data
                
                updateUI();
            });

        fetch('/api/cards')
            .then(response => response.json())
            .then(apidata => {
                data = apidata;
                renderCard(data.cards[currentCardIndex]);
            });
        
    </script>

</body>
</html>
