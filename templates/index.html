<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <title>Defensio</title>
</head>

    <body class="bg-gray-200">
        <div id="flex-container-1" class="flex-container">
                <!-- Logo en haut à gauche -->
                <img src="/static/logo.png" alt="Votre Logo" class="w-16 h-16">
                <!-- Numéro du groupe en haut à droite -->
                <div id="numberDisplay" class="text-xl font-bold">Groupe #1</div>
           
        </div>
    </div>

    <div id="flex-container-2" class="flex-container">
        <!-- Jauges -->    
        <div id="Jauge1">Jauge1
        </div>
        <div id="Jauge2">Jauge2
        </div>
        <div id="Jauge3">Jauge3
        </div>
   
    </div>


    <!-- Add a container for the cards -->
    <div id="card-container" class="flex-container"></div>

    <script>
        function getCookie(name) {
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookie = cookies[i].trim();
            if (cookie.indexOf(name + "=") === 0) {
            return cookie.substring(name.length + 1);
            }
        }
        return "";
        };

        var storedNumber = getCookie("number");
        $("#numberDisplay").text("Group "+storedNumber);
    </script>
   
   <script>
    let currentCardIndex = 0;
    let data;

    fetch('/api/cards')
            .then(response => response.json())
            .then(apidata => {
                data = apidata;
            });

    function renderCard(card) {
        const cardsContainer = document.getElementById('card-container');
        cardsContainer.innerHTML = ''; // Clear previous card

        const cardElement = document.createElement('div');
        cardElement.innerHTML = `
            <img src="../static/carte.png" alt="${card.name}">
            <p>${card.name}</p>
            <button onclick="handleCardChoice('yes')">Oui</button>
            <button onclick="handleCardChoice('no')">Non</button>
        `;
        cardsContainer.appendChild(cardElement);
    }

    function handleCardChoice(choice) {
        // Handle the choice logic here
        // ...

        // Move to the next card
        currentCardIndex++;

        // Fetch the next card data from the Flask endpoint
        //fetch('/api/cards')
          //  .then(response => response.json())
            //.then(data => {
                if (currentCardIndex < data.cards.length) {
                    renderCard(data.cards[currentCardIndex]);
                } else {
                    // All cards have been displayed, you may want to handle this case
                    console.log("All cards have been displayed");
                };
    }

    // Initial rendering of the first card
    fetch('/api/cards')
        .then(response => response.json())
        .then(data => {
            if (currentCardIndex < data.cards.length) {
                renderCard(data.cards[currentCardIndex]);
            } else {
                // Handle the case when there are no cards
                console.log("No cards available");
            }
        });
</script>


</body>
</html>

